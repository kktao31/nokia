<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מדריך אינטראקטיבי: שאיבת קושחה מנוקיה 215/225</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Assistant', sans-serif; }
        .tab-active { border-color: #f59e0b; color: #f59e0b; background-color: #fffbeb; }
        .tab-inactive { border-color: transparent; color: #475569; }
        .section-active { display: block; }
        .section-inactive { display: none; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        code {
            background-color: #f1f5f9;
            color: #1e293b;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            direction: ltr;
            display: inline-block;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #f59e0b;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-stone-50 text-slate-800">

    <div id="app-container" class="container mx-auto p-4 sm:p-6 lg:p-8">

        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-900 mb-2">מדריך מומחה לשאיבת קושחה (PAC)</h1>
            <p class="text-lg text-slate-600">טלפוני נוקיה 215 / 225 (מבוססי Spreadtrum/Unisoc)</p>
        </header>

        <div id="warning-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-lg shadow-2xl p-6 sm:p-8 max-w-lg w-full text-center transform transition-all scale-95 opacity-0" id="warning-modal-content">
                <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-amber-100 mb-4">
                    <span class="text-4xl">⚠️</span>
                </div>
                <h3 class="text-2xl font-bold text-slate-900 mb-3">אזהרה והבהרה חשובה</h3>
                <p class="text-slate-600 mb-6">
                    תהליך שאיבת הקושחה הוא הליך טכני מתקדם הכרוך בסיכונים משמעותיים, כולל "בריק" (הפיכת המכשיר ללא שמיש), אובדן נתונים וביטול אחריות יצרן. יש לבצע את כל הפעולות בזהירות מירבית ועל אחריותך המלאה.
                </p>
                <button id="close-warning-btn" class="w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">הבנתי, אני לוקח/ת אחריות</button>
            </div>
        </div>
        
        <div class="w-full bg-white p-4 rounded-xl shadow-md mb-8">
            <h2 class="text-xl font-bold text-slate-800 mb-3 text-center">תרשים זרימת התהליך</h2>
            <div class="flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-2 sm:rtl:space-x-reverse text-center text-sm">
                <div class="flex items-center">
                    <div class="process-step cursor-pointer p-3 bg-slate-100 rounded-lg hover:bg-slate-200 transition" data-target="intro">הכנה</div>
                    <div class="text-slate-400 mx-2 font-mono">&gt;</div>
                </div>
                <div class="flex items-center">
                    <div class="process-step cursor-pointer p-3 bg-slate-100 rounded-lg hover:bg-slate-200 transition" data-target="drivers">התקנת דרייברים</div>
                    <div class="text-slate-400 mx-2 font-mono">&gt;</div>
                </div>
                <div class="flex items-center">
                    <div class="process-step cursor-pointer p-3 bg-slate-100 rounded-lg hover:bg-slate-200 transition" data-target="methods">שיטות שאיבה</div>
                     <div class="text-slate-400 mx-2 font-mono">&gt;</div>
                </div>
                <div class="process-step cursor-pointer p-3 bg-slate-100 rounded-lg hover:bg-slate-200 transition" data-target="troubleshooting">פתרון תקלות</div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-lg">
            <nav class="border-b border-slate-200">
                <ul class="flex flex-wrap -mb-px text-sm font-medium text-center">
                    <li class="mr-2 rtl:ml-2 rtl:mr-0"><button class="app-tab inline-block p-4 border-b-2 rounded-t-lg tab-active" data-target="intro">מבוא והכנה</button></li>
                    <li class="mr-2 rtl:ml-2 rtl:mr-0"><button class="app-tab inline-block p-4 border-b-2 rounded-t-lg tab-inactive" data-target="drivers">התקנת דרייברים</button></li>
                    <li class="mr-2 rtl:ml-2 rtl:mr-0"><button class="app-tab inline-block p-4 border-b-2 rounded-t-lg tab-inactive" data-target="methods">שיטות שאיבה</button></li>
                    <li><button class="app-tab inline-block p-4 border-b-2 rounded-t-lg tab-inactive" data-target="troubleshooting">סיכונים ופתרון תקלות</button></li>
                </ul>
            </nav>

            <div class="p-4 sm:p-6 lg:p-8">
                <section id="intro" class="app-section section-active">
                    <h2 class="text-2xl font-bold mb-4 text-slate-900">I. מבוא והכנה</h2>
                    <p class="mb-6 text-slate-600">
                        ברוכים הבאים למדריך האינטראקטיבי לשאיבת קושחה. חלק זה יציג בפניכם את המושגים הבסיסיים, יבהיר מונחים חשובים ויפרט את כל דרישות החומרה והתוכנה הדרושות כדי להתחיל בתהליך. הכנה נכונה היא המפתח להצלחה ולמזעור סיכונים.
                    </p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg">
                            <h3 class="font-bold text-blue-900">הבהרה: קובץ PAC - לא מה שחשבתם!</h3>
                            <p class="text-blue-800 text-sm mt-2">המונח 'קובץ PAC' יכול להיות מבלבל. בהקשר שלנו, <code>.PAC</code> הוא <strong>Packet File</strong>, חבילת קושחה למכשירי Spreadtrum/Unisoc. זה לא קשור לקבצי <strong>Proxy-Auto-Configuration</strong> המשמשים ברשתות מחשבים.</p>
                        </div>
                        <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg">
                            <h3 class="font-bold text-green-900">ההבדל המהותי: שאיבה vs. התקנה</h3>
                            <p class="text-green-800 text-sm mt-2"><strong>התקנה (Flashing):</strong> כתיבת קושחה אל המכשיר. <strong>שאיבה (Extraction/Dumping):</strong> קריאת הקושחה מתוך המכשיר. מדריך זה מתמקד בשאיבה, שהיא לרוב מורכבת יותר.</p>
                        </div>
                    </div>

                    <div class="mt-8">
                        <h3 class="text-xl font-bold mb-4 text-slate-800">מבנה קובץ קושחה .PAC</h3>
                        <p class="text-slate-600 mb-4">קובץ .PAC הוא ארכיון המכיל רכיבים שונים. העבירו את העכבר מעל הרכיבים בדיאגרמה כדי ללמוד על תפקידם.</p>
                        <div class="p-4 border border-slate-200 rounded-lg bg-slate-50">
                            <div class="component-box" data-info="קובץ PAC (Packet File) - ארכיון הקושחה הראשי">
                                📦 PAC File
                                <div class="ml-4 rtl:mr-4 mt-2 pl-4 rtl:pr-4 border-l-2 rtl:border-r-2 rtl:border-l-0 border-slate-300">
                                    <div class="component-box" data-info="Firmware Downloader 1: קוד אתחול ראשוני. טוען את FDL2 ל-RAM.">📄 FDL1</div>
                                    <div class="component-box" data-info="Firmware Downloader 2: מאפשר גישה לזיכרון הפלאש של המכשיר.">📄 FDL2</div>
                                    <div class="component-box" data-info="Uboot: מנהל האתחול הראשי של המכשיר.">🚀 Bootloader (Uboot)</div>
                                    <div class="component-box" data-info="מחיצות מערכת שונות. רחפו מעל כל אחת לפרטים.">🗂️ Partitions
                                        <div class="ml-4 rtl:mr-4 mt-2 pl-4 rtl:pr-4 border-l-2 rtl:border-r-2 rtl:border-l-0 border-slate-300">
                                             <div class="component-box" data-info="מערכת ההפעלה ויישומי הליבה.">💿 System</div>
                                             <div class="component-box" data-info="נתוני משתמש כמו אנשי קשר ותמונות.">👤 Userdata</div>
                                             <div class="component-box" data-info="נתוני תצורה קריטיים כמו IMEI.">⚙️ NVdata</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="component-tooltip" class="hidden absolute bg-slate-800 text-white text-xs rounded py-1 px-2 z-10"></div>
                    </div>

                    <h3 class="text-xl font-bold mt-8 mb-4 text-slate-800">דרישות קדם</h3>
                    <div class="space-y-4">
                        <div class="accordion-item bg-white p-4 rounded-lg border">
                            <button class="accordion-header w-full text-right flex justify-between items-center font-semibold text-lg">
                                <span>🖥️ חומרה</span>
                                <span class="accordion-icon transform rotate-0 transition-transform">▼</span>
                            </button>
                            <div class="accordion-content">
                                <ul class="list-disc pr-5 mt-2 text-slate-600 space-y-2">
                                    <li>מחשב PC עם מערכת הפעלה Windows (מומלץ 7 ומעלה).</li>
                                    <li>כבל נתונים USB איכותי ותואם לדגם הטלפון.</li>
                                </ul>
                            </div>
                        </div>
                        <div class="accordion-item bg-white p-4 rounded-lg border">
                            <button class="accordion-header w-full text-right flex justify-between items-center font-semibold text-lg">
                                <span>💾 תוכנה</span>
                                <span class="accordion-icon transform rotate-0 transition-transform">▼</span>
                            </button>
                            <div class="accordion-content">
                                 <ul class="list-disc pr-5 mt-2 text-slate-600 space-y-2">
                                    <li>כלי שאיבה: <code>spd_dump</code> (מומלץ לשאיבה ישירה).</li>
                                    <li>כלי עזר: <code>pacextractor</code> (לפירוק קבצי PAC קיימים).</li>
                                     <li>כלי התקנה: <code>ResearchDownload / SPD Upgrade Tool</code>.</li>
                                     <li>מנהלי התקנים (דרייברים) של Spreadtrum/Unisoc.</li>
                                </ul>
                            </div>
                        </div>
                        <div class="accordion-item bg-white p-4 rounded-lg border">
                            <button class="accordion-header w-full text-right flex justify-between items-center font-semibold text-lg">
                                <span>⚙️ הכנת מערכת ההפעלה (Windows 10/11)</span>
                                <span class="accordion-icon transform rotate-0 transition-transform">▼</span>
                            </button>
                            <div class="accordion-content">
                                <p class="mt-2 text-slate-700">זהו שלב קריטי! יש להשבית את אכיפת חתימות הדרייברים כדי לאפשר התקנה של הדרייברים המיוחדים (שלרוב אינם חתומים דיגיטלית).</p>
                                <ol class="list-decimal pr-5 mt-2 text-slate-600 space-y-1">
                                    <li>לחצו על `Shift` במקלדת והחזיקו אותו לחוץ.</li>
                                    <li>תוך כדי החזקת `Shift`, לחצו על תפריט "התחל" -> "הפעלה" -> "הפעל מחדש".</li>
                                    <li>במסך הכחול, בחרו: "פתור בעיות" -> "אפשרויות מתקדמות" -> "הגדרות אתחול" -> "הפעל מחדש".</li>
                                    <li>לאחר ההפעלה מחדש, לחצו על מקש `7` או `F7` כדי לבחור באפשרות "השבת אכיפת חתימת מנהלי התקנים".</li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 p-4 bg-purple-50 rounded-lg border border-purple-200">
                        <h4 class="font-bold text-lg text-purple-800 mb-3">✨ מילון מונחים טכני</h4>
                        <p class="text-slate-700 mb-3">הזן מונח טכני (לדוגמה: "FDL", "NVdata", "Bootloader") וקבל הסבר תמציתי:</p>
                        <input type="text" id="term-explainer-input" class="w-full p-2 border border-slate-300 rounded-md mb-3 focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="הזן מונח טכני">
                        <button id="explain-term-btn" class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center justify-center">
                            <span id="explain-btn-text">הסבר מונח ✨</span>
                            <div id="explain-btn-spinner" class="spinner hidden ml-2 rtl:mr-2"></div>
                        </button>
                        <div id="term-explanation-output" class="mt-4 p-3 bg-slate-100 border border-slate-200 rounded-md hidden">
                            <p id="term-explanation" class="text-slate-800"></p>
                        </div>
                        <div id="explanation-error-message" class="mt-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-md hidden"></div>
                    </div>
                </section>
                
                <section id="drivers" class="app-section section-inactive">
                    <h2 class="text-2xl font-bold mb-4 text-slate-900">II. התקנת דרייברים</h2>
                    <p class="mb-6 text-slate-600">
                        התקנת הדרייברים הנכונים היא השלב החשוב ביותר, המאפשר למחשב לתקשר עם הטלפון במצב הורדה. ללא דרייברים תקינים, אף אחד מהכלים לא יעבוד. הקפידו לבצע את השלבים הבאים במדויק.
                    </p>
                    <div class="bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-lg mb-6">
                        <h3 class="font-bold text-amber-900">תזכורת חשובה</h3>
                        <p class="text-amber-800 text-sm mt-2">ודאו שביצעתם את השלב של השבתת אכיפת חתימות הדרייברים (כפי שמוסבר בחלק "הכנה") לפני שתתחילו בתהליך זה.</p>
                    </div>
                    
                    <h3 class="text-xl font-bold mb-4 text-slate-800">מדריך התקנה ידנית</h3>
                     <ol class="list-decimal pr-5 space-y-4 text-slate-700">
                        <li><strong>הורדת הדרייברים:</strong> השיגו את חבילת הדרייברים של Spreadtrum/Unisoc המתאימה לגרסת ה-Windows שלכם (32 או 64 ביט).</li>
                        <li><strong>הכנת הטלפון:</strong>
                            <ul class="list-disc pr-5 mt-2 space-y-1">
                                <li>ודאו שהטלפון כבוי לחלוטין (מומלץ להוציא ולהחזיר סוללה).</li>
                                <li>פתחו את "מנהל ההתקנים" ב-Windows.</li>
                                <li>לחצו והחזיקו את "מקש האתחול" בטלפון (לרוב `כפתור ווליום תחתון`, אך יכול להשתנות).</li>
                                <li>תוך כדי החזקת המקש, חברו את הטלפון למחשב באמצעות כבל ה-USB.</li>
                            </ul>
                        </li>
                        <li><strong>איתור ההתקן:</strong> במנהל ההתקנים, יופיע התקן חדש, לרוב תחת "התקנים אחרים" עם סימן קריאה צהוב.</li>
                        <li><strong>התקנה:</strong>
                             <ul class="list-disc pr-5 mt-2 space-y-1">
                                <li>לחצו קליק ימני על ההתקן הלא מזוהה ובחרו "עדכן מנהל התקן".</li>
                                <li>בחרו "חפש מנהלי התקנים במחשב שלי".</li>
                                 <li>נווטו לתיקייה שבה חילצתם את הדרייברים, סמנו "כלול תיקיות משנה" ולחצו "הבא".</li>
                                 <li>אם תופיע אזהרת אבטחה על דרייבר לא חתום, **חובה לבחור "התקן תוכנת מנהל התקן זו בכל מקרה"**.</li>
                            </ul>
                        </li>
                        <li><strong>אימות:</strong> לאחר ההתקנה, ההתקן אמור להופיע תחת "יציאות (COM & LPT)" עם שם כמו "Spreadtrum Diagnostics Port".</li>
                    </ol>
                </section>

                <section id="methods" class="app-section section-inactive">
                     <h2 class="text-2xl font-bold mb-4 text-slate-900">III. שיטות שאיבה</h2>
                     <p class="mb-6 text-slate-600">
                        כעת, לאחר שהכנו את המערכת והתקנו את הדרייברים, הגענו לחלק המעשי של שאיבת הקושחה. בחלק זה נסקור את הכלים המרכזיים והשיטות לביצוע המשימה. כל כלי משרת מטרה שונה במקצת, ולכן חשוב להבין את ההבדלים ביניהם כדי לבחור בדרך הנכונה למטרתכם.
                    </p>
                    
                    <div class="space-y-4">
                        <div class="accordion-item bg-white p-4 rounded-lg border">
                            <button class="accordion-header w-full text-right flex justify-between items-center font-semibold text-lg text-green-700">
                                <span>⭐ שיטה 1: שימוש ב-`spd_dump` (מומלץ לשאיבה ישירה)</span>
                                <span class="accordion-icon transform rotate-0 transition-transform">▼</span>
                            </button>
                            <div class="accordion-content">
                                <p class="mt-2 text-slate-600">`spd_dump` הוא כלי שורת פקודה חזק המאפשר קריאה ישירה של זיכרון הפלאש מהמכשיר. זוהי השיטה המועדפת לשאיבת קושחה מלאה.</p>
                                <h4 class="font-semibold mt-4 mb-2">דרישות קדם קריטיות:</h4>
                                <ul class="list-disc pr-5 text-slate-600 space-y-1">
                                    <li>קבצי <code>FDL</code> (FDL1, FDL2) תואמים לערכת השבבים שלכם. לרוב, ניתן לחלץ אותם מקובץ PAC קיים באמצעות ResearchDownload.</li>
                                    <li>זיהוי "מקש האתחול" המדויק של המכשיר (לרוב ווליום למטה, אך לעיתים `0`, `*` או מקש מרכזי).</li>
                                </ul>
                                <h4 class="font-semibold mt-4 mb-2">שלבי ביצוע:</h4>
                                <ol class="list-decimal pr-5 space-y-2 text-slate-700">
                                    <li>מקמו את קבצי ה-FDL בתיקיית `spd_dump`.</li>
                                    <li>פתחו שורת פקודה (CMD) בתיקייה זו.</li>
                                    <li>הריצו את הכלי כדי שימתין לחיבור: <code>spd_dump.exe</code>.</li>
                                    <li>הכניסו את הטלפון הכבוי למצב הורדה (החזקת מקש אתחול + חיבור USB).</li>
                                    <li>כשהכלי מזהה את הטלפון, השתמשו בפקודת הקריאה. לדוגמה, לשאיבת 4MB: <br><code>spd_dump read_flash firmware.bin 0x0 0x400000</code></li>
                                    <li>לאחר הסיום, ודאו שקובץ ה-<code>firmware.bin</code> שנוצר אינו ריק.</li>
                                </ol>

                                <div class="mt-8 p-4 bg-amber-50 rounded-lg border border-amber-200">
                                    <h4 class="font-bold text-lg text-amber-800 mb-3">✨ מחולל פקודות `spd_dump`</h4>
                                    <p class="text-slate-700 mb-3">תארו את פעולת השאיבה הרצויה (לדוגמה: "שאיבת 8MB מכתובת 0x1000 לקובץ בשם my_rom.bin"):</p>
                                    <input type="text" id="spd-dump-input" class="w-full p-2 border border-slate-300 rounded-md mb-3 focus:outline-none focus:ring-2 focus:ring-amber-500" placeholder="תיאור הפקודה">
                                    <button id="generate-spd-dump-btn" class="w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center justify-center">
                                        <span id="generate-btn-text">צור פקודה ✨</span>
                                        <div id="generate-btn-spinner" class="spinner hidden ml-2 rtl:mr-2"></div>
                                    </button>
                                    <div id="generated-command-output" class="mt-4 p-3 bg-slate-100 border border-slate-200 rounded-md hidden">
                                        <p class="text-slate-600 mb-2">הפקודה שנוצרה:</p>
                                        <code id="generated-command" class="block whitespace-pre-wrap break-all text-slate-800"></code>
                                    </div>
                                    <div id="command-error-message" class="mt-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-md hidden"></div>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item bg-white p-4 rounded-lg border">
                            <button class="accordion-header w-full text-right flex justify-between items-center font-semibold text-lg text-blue-700">
                                <span>שיטה 2: פירוק קבצי PAC קיימים עם `pacextractor`</span>
                                <span class="accordion-icon transform rotate-0 transition-transform">▼</span>
                            </button>
                            <div class="accordion-content">
                                <p class="mt-2 text-slate-600">כלי זה אינו שואב קושחה מהטלפון, אלא מפרק קובץ <code>.PAC</code> שכבר הורדתם למרכיביו (מחיצות, FDL, וכו'). שימושי לניתוח או חילוץ רכיבים.</p>
                                <h4 class="font-semibold mt-4 mb-2">שלבי ביצוע:</h4>
                                <ol class="list-decimal pr-5 space-y-2 text-slate-700">
                                    <li>מקמו את `pacextractor.exe` ואת קובץ ה-<code>.PAC</code> באותה תיקייה.</li>
                                    <li>פתחו שורת פקודה בתיקייה זו.</li>
                                    <li>הריצו את הפקודה: <br><code>pacextractor.exe your_firmware_file.pac</code></li>
                                    <li>הקבצים המחולצים יופיעו בתיקיית פלט חדשה.</li>
                                </ol>
                            </div>
                        </div>

                        <div class="accordion-item bg-white p-4 rounded-lg border">
                            <button class="accordion-header w-full text-right flex justify-between items-center font-semibold text-lg text-slate-700">
                                <span>שיטה 3: שימוש ב-`ResearchDownload` (יכולות מוגבלות)</span>
                                <span class="accordion-icon transform rotate-0 transition-transform">▼</span>
                            </button>
                            <div class="accordion-content">
                                <p class="mt-2 text-slate-600">זהו בעיקר כלי התקנה, אך גרסאות מסוימות כוללות פונקציית "Readback" המאפשרת קריאה חלקית של הזיכרון. שימושי בעיקר לחילוץ קבצי FDL.</p>
                                <h4 class="font-semibold mt-4 mb-2">שימוש עיקרי בהקשר שלנו: חילוץ FDL</h4>
                                <ol class="list-decimal pr-5 space-y-2 text-slate-700">
                                    <li>פתחו את ResearchDownload וטענו קובץ <code>.PAC</code> רלוונטי.</li>
                                    <li>אל תתחילו את ההתקנה.</li>
                                    <li>הכלי יוצר תיקייה זמנית במחשב עם קבצים מחולצים. נווטו אליה.</li>
                                    <li>העתיקו משם את קבצי ה-<code>FDL</code> הדרושים לכם עבור `spd_dump`.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section id="troubleshooting" class="app-section section-inactive">
                    <h2 class="text-2xl font-bold mb-4 text-slate-900">IV. סיכונים ופתרון תקלות</h2>
                    <p class="mb-6 text-slate-600">
                        כל הליך טכני מורכב עלול להיתקל בקשיים. חלק זה מפרט את הסיכונים העיקריים הכרוכים בתהליך ומציע פתרונות לתקלות הנפוצות ביותר. השתמשו בתרשים האינטראקטיבי כדי למצוא פתרון מהיר לבעיה שבה נתקלתם.
                    </p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                         <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg">
                            <h3 class="font-bold text-red-900">סיכון: בריק (Bricking)</h3>
                            <p class="text-red-800 text-sm mt-2"><strong>בריק רך:</strong> המכשיר נתקע בלולאת אתחול אך ניתן לשחזור ע"י התקנת קושחה מחדש. <strong>בריק קשה:</strong> המכשיר לא נדלק כלל. נדיר יותר בטלפונים פשוטים אך אפשרי.</p>
                        </div>
                        <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-r-lg">
                            <h3 class="font-bold text-yellow-900">סיכונים נוספים</h3>
                            <p class="text-yellow-800 text-sm mt-2">אובדן מלא של נתונים אישיים, ביטול אחריות יצרן, ופוטנציאל לחשיפת המכשיר לפגיעויות אבטחה אם משתמשים בקושחה לא מהימנה.</p>
                        </div>
                    </div>
                    
                    <h3 class="text-xl font-bold mb-4 text-slate-800">מאבחן תקלות אינטראקטיבי</h3>
                    <p class="text-slate-600 mb-4">לחצו על התסמין בתרשים כדי לראות את הסיבה הסבירה והפתרון המומלץ.</p>
                    
                    <div class="chart-container relative w-full h-[400px] md:h-[500px] max-w-3xl mx-auto">
                        <canvas id="troubleshooting-chart"></canvas>
                    </div>
                    <div id="solution-box" class="mt-6 p-4 bg-slate-100 rounded-lg border border-slate-200 hidden">
                        <h4 id="solution-title" class="font-bold text-lg text-slate-800 mb-2"></h4>
                        <p id="solution-text" class="text-slate-700"></p>
                    </div>
                </section>
            </div>
        </div>
        <footer class="text-center mt-8 text-sm text-slate-500">
            <p>יישום אינטראקטיבי זה נוצר על בסיס דוח טכני. יש להשתמש במידע באחריות ובזהירות.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.app-tab');
            const sections = document.querySelectorAll('.app-section');
            const processSteps = document.querySelectorAll('.process-step');
            
            function showSection(targetId) {
                sections.forEach(section => {
                    if (section.id === targetId) {
                        section.classList.replace('section-inactive', 'section-active');
                    } else {
                        section.classList.replace('section-active', 'section-inactive');
                    }
                });

                tabs.forEach(tab => {
                    if (tab.dataset.target === targetId) {
                        tab.classList.replace('tab-inactive', 'tab-active');
                    } else {
                        tab.classList.replace('tab-active', 'tab-inactive');
                    }
                });
            }

            tabs.forEach(tab => {
                tab.addEventListener('click', () => showSection(tab.dataset.target));
            });
            
            processSteps.forEach(step => {
                step.addEventListener('click', () => {
                    const targetId = step.dataset.target;
                    showSection(targetId);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            const accordions = document.querySelectorAll('.accordion-item');
            accordions.forEach(item => {
                const header = item.querySelector('.accordion-header');
                const content = item.querySelector('.accordion-content');
                const icon = item.querySelector('.accordion-icon');

                header.addEventListener('click', () => {
                    const isOpened = content.style.maxHeight && content.style.maxHeight !== '0px';
                    if (isOpened) {
                        content.style.maxHeight = '0px';
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        content.style.maxHeight = content.scrollHeight + 'px';
                        icon.style.transform = 'rotate(180deg)';
                    }
                });
            });

            const componentBoxes = document.querySelectorAll('.component-box');
            const tooltip = document.getElementById('component-tooltip');
            componentBoxes.forEach(box => {
                box.addEventListener('mousemove', (e) => {
                    tooltip.classList.remove('hidden');
                    tooltip.textContent = box.dataset.info;
                    tooltip.style.left = e.pageX + 10 + 'px';
                    tooltip.style.top = e.pageY + 10 + 'px';
                });
                box.addEventListener('mouseleave', () => {
                    tooltip.classList.add('hidden');
                });
            });
            
            const warningModal = document.getElementById('warning-modal');
            const warningModalContent = document.getElementById('warning-modal-content');
            const closeWarningBtn = document.getElementById('close-warning-btn');
            
            window.setTimeout(() => {
                warningModalContent.style.scale = '1';
                warningModalContent.style.opacity = '1';
            }, 100);

            closeWarningBtn.addEventListener('click', () => {
                 warningModalContent.style.scale = '0.95';
                 warningModalContent.style.opacity = '0';
                 window.setTimeout(() => {
                    warningModal.style.display = 'none';
                 }, 300);
            });

            const troubleshootingData = {
                labels: [
                    'כלי תקוע ב"ממתין"',
                    'הטלפון לא מזוהה כלל',
                    'שגיאת "Bin Packet"',
                    'קובץ שאיבה ריק/פגום',
                    'הטלפון נכנס למצב טעינה',
                    'סימן קריאה צהוב במנהל ההתקנים',
                ],
                datasets: [{
                    label: 'שכיחות תקלה (מדד יחסי)',
                    data: [9, 8, 6, 7, 8, 9],
                    backgroundColor: [
                        'rgba(251, 146, 60, 0.6)',
                        'rgba(239, 68, 68, 0.6)',
                        'rgba(168, 85, 247, 0.6)',
                        'rgba(59, 130, 246, 0.6)',
                        'rgba(245, 158, 11, 0.6)',
                        'rgba(249, 115, 22, 0.6)'
                    ],
                    borderColor: [
                        'rgba(251, 146, 60, 1)',
                        'rgba(239, 68, 68, 1)',
                        'rgba(168, 85, 247, 1)',
                        'rgba(59, 130, 246, 1)',
                        'rgba(245, 158, 11, 1)',
                        'rgba(249, 115, 22, 1)'
                    ],
                    borderWidth: 1
                }],
                solutions: [
                    { title: "פתרון: כלי תקוע ב'ממתין'", text: "הסיבה היא לרוב בעיית דרייברים. ודא שאכיפת חתימת הדרייברים מושבתת, התקן מחדש את דרייבר ה-Spreadtrum. נסה יציאת USB וכבל אחרים." },
                    { title: "פתרון: הטלפון לא מזוהה", text: "ודא שהדרייברים מותקנים, נסה כבל/יציאת USB אחרת. ודא שאתה משתמש ב'מקש האתחול' הנכון ובתזמון החיבור המדויק (לחיצה ממושכת על המקש ואז חיבור הכבל)." },
                    { title: "פתרון: שגיאת 'Bin Packet'", text: "שגיאה זו מצביעה על בעיה בקובץ ה-PAC. הורד אותו מחדש ממקור אמין. ודא שגרסת הקושחה וגרסת כלי ההתקנה (ResearchDownload) תואמות לדגם המכשיר שלך." },
                    { title: "פתרון: קובץ שאיבה ריק/פגום", text: "יכול להיגרם מהגנת קריאה בזיכרון, FDL לא תואם, או תזמון שגוי. ודא שימוש ב-FDL נכון. נסה לשאוב מחיצות קטנות יותר כל פעם. ודא שהטלפון במצב הורדה יציב." },
                    { title: "פתרון: הטלפון נכנס למצב טעינה", text: "זהו סימן ברור שלא נכנסת למצב הורדה. מקש האתחול שנלחץ אינו נכון, או שתזמון הפעולות (לחיצה->חיבור) היה שגוי. נסה שילוב מקשים אחר." },
                    { title: "פתרון: סימן קריאה צהוב", text: "מצביע על בעיית דרייבר, לרוב כי הוא לא חתום. השבת את אכיפת חתימת הדרייברים והתקן אותו מחדש. במהלך ההתקנה, אשר את התקנת הדרייבר הלא חתום." },
                ]
            };
            
            const solutionBox = document.getElementById('solution-box');
            const solutionTitle = document.getElementById('solution-title');
            const solutionText = document.getElementById('solution-text');
            const ctx = document.getElementById('troubleshooting-chart').getContext('2d');
            
            new Chart(ctx, {
                type: 'bar',
                data: troubleshootingData,
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                             grid: { color: '#e2e8f0' }
                        },
                        y: {
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                             callbacks: {
                                label: function(context) {
                                    return ' לחץ לפרטים';
                                }
                            }
                        }
                    },
                    onClick: (e, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const solution = troubleshootingData.solutions[index];
                            solutionTitle.textContent = solution.title;
                            solutionText.textContent = solution.text;
                            solutionBox.classList.remove('hidden');
                            solutionBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }
                }
            });

            // Gemini API Integration for spd_dump command generation
            const spdDumpInput = document.getElementById('spd-dump-input');
            const generateSpdDumpBtn = document.getElementById('generate-spd-dump-btn');
            const generateBtnText = document.getElementById('generate-btn-text');
            const generateBtnSpinner = document.getElementById('generate-btn-spinner');
            const generatedCommandOutput = document.getElementById('generated-command-output');
            const generatedCommand = document.getElementById('generated-command');
            const commandErrorMessage = document.getElementById('command-error-message');

            generateSpdDumpBtn.addEventListener('click', async () => {
                const promptText = spdDumpInput.value.trim();
                if (!promptText) {
                    commandErrorMessage.textContent = 'אנא הזן תיאור לפקודה.';
                    commandErrorMessage.classList.remove('hidden');
                    generatedCommandOutput.classList.add('hidden');
                    return;
                }

                generateBtnText.classList.add('hidden');
                generateBtnSpinner.classList.remove('hidden');
                commandErrorMessage.classList.add('hidden');
                generatedCommandOutput.classList.add('hidden');

                try {
                    let chatHistory = [];
                    const userPrompt = `Generate a single \`spd_dump\` command for a Nokia 215/225 phone (Spreadtrum/Unisoc chipset) based on the following request. Provide only the command, without any introductory or explanatory text. If the request is unclear or cannot be translated to a single \`spd_dump\` command, respond with 'לא ניתן ליצור פקודה מדויקה מהתיאור שסופק.'.\n\nRequest: ${promptText}`;
                    chatHistory.push({ role: "user", parts: [{ text: userPrompt }] });
                    const payload = { contents: chatHistory };
                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        generatedCommand.textContent = text.trim();
                        generatedCommandOutput.classList.remove('hidden');
                    } else {
                        commandErrorMessage.textContent = 'שגיאה ביצירת הפקודה. נסה שוב או נסח מחדש את בקשתך.';
                        commandErrorMessage.classList.remove('hidden');
                    }

                } catch (error) {
                    console.error('Error calling Gemini API:', error);
                    commandErrorMessage.textContent = 'אירעה שגיאה בתקשורת עם השרת. אנא נסה שוב מאוחר יותר.';
                    commandErrorMessage.classList.remove('hidden');
                } finally {
                    generateBtnText.classList.remove('hidden');
                    generateBtnSpinner.classList.add('hidden');
                }
            });

            // Gemini API Integration for technical term explanation
            const termExplainerInput = document.getElementById('term-explainer-input');
            const explainTermBtn = document.getElementById('explain-term-btn');
            const explainBtnText = document.getElementById('explain-btn-text');
            const explainBtnSpinner = document.getElementById('explain-btn-spinner');
            const termExplanationOutput = document.getElementById('term-explanation-output');
            const termExplanation = document.getElementById('term-explanation');
            const explanationErrorMessage = document.getElementById('explanation-error-message');

            explainTermBtn.addEventListener('click', async () => {
                const term = termExplainerInput.value.trim();
                if (!term) {
                    explanationErrorMessage.textContent = 'אנא הזן מונח להסבר.';
                    explanationErrorMessage.classList.remove('hidden');
                    termExplanationOutput.classList.add('hidden');
                    return;
                }

                explainBtnText.classList.add('hidden');
                explainBtnSpinner.classList.remove('hidden');
                explanationErrorMessage.classList.add('hidden');
                termExplanationOutput.classList.add('hidden');

                try {
                    let chatHistory = [];
                    const userPrompt = `Provide a concise, easy-to-understand explanation for the technical term "${term}" in the context of Nokia 215/225 phone firmware extraction (Spreadtrum/Unisoc chipsets). If the term is not relevant or cannot be explained in this context, respond with 'המונח אינו רלוונטי או לא ניתן להסבירו בהקשר זה.'. Provide only the explanation, without any introductory or concluding remarks.`;
                    chatHistory.push({ role: "user", parts: [{ text: userPrompt }] });
                    const payload = { contents: chatHistory };
                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        termExplanation.textContent = text.trim();
                        termExplanationOutput.classList.remove('hidden');
                    } else {
                        explanationErrorMessage.textContent = 'שגיאה ביצירת ההסבר. נסה שוב או נסח מחדש את בקשתך.';
                        explanationErrorMessage.classList.remove('hidden');
                    }

                } catch (error) {
                    console.error('Error calling Gemini API:', error);
                    explanationErrorMessage.textContent = 'אירעה שגיאה בתקשורת עם השרת. אנא נסה שוב מאוחר יותר.';
                    explanationErrorMessage.classList.remove('hidden');
                } finally {
                    explainBtnText.classList.remove('hidden');
                    explainBtnSpinner.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>
